import {
  BottomSheetModal,
  BottomSheetModalProvider,
} from "@gorhom/bottom-sheet";
import { NativeStackScreenProps } from "@react-navigation/native-stack";
import * as Haptics from "expo-haptics";
import { useCallback, useRef, useState } from "react";
import { Text, ToastAndroid, View } from "react-native";
import {
  useAnimatedStyle,
  useSharedValue,
  withRepeat,
  withSequence,
  withTiming,
} from "react-native-reanimated";
import Svg, { SvgProps, G, Path, Defs, ClipPath } from "react-native-svg";
import { RootStackParamList } from "./root-stack-param-list";
import { ScreenLayout } from "./screen-layout";
import { useLang } from "@/modules/lang";
import { PasswordInput, PasswordGeneratorCopySheet } from "@/modules/password";
import { DeleteVaultSheet, useUnlockVault } from "@/modules/vault";
import {
  ScalablePressable,
  useTheme,
  DiceIcon,
  RightArrowIcon,
  EASING,
  TrashIcon,
} from "@/ui";
import { InvalidKeyError } from "@/utils/crypto";

export function UnlockVaultScreen({
  navigation,
}: NativeStackScreenProps<RootStackParamList, "UnlockVault">) {
  const { colors, scale } = useTheme();
  const lang = useLang();

  const passwordGeneratorSheetRef = useRef<BottomSheetModal>(null);
  const handlePresentPasswordGeneratorPress = useCallback(() => {
    passwordGeneratorSheetRef.current?.present();
  }, []);

  const deleteVaultSheetRef = useRef<BottomSheetModal>(null);
  const handlePresentDeleteVaultSheetPress = useCallback(() => {
    deleteVaultSheetRef.current?.present();
  }, []);

  const unlockVault = useUnlockVault();

  const [formPassword, setFormPassword] = useState("");

  const unlockVaultButtonTranslateX = useSharedValue(0);
  const unlockVaultButtonTranslateXAnimatedStyle = useAnimatedStyle(() => {
    return {
      transform: [
        {
          translateX: unlockVaultButtonTranslateX.value,
        },
      ],
    };
  });

  const shakeUnlockVaultButton = () => {
    const offset = 2;
    const duration = 50;
    unlockVaultButtonTranslateX.value = withSequence(
      withTiming(offset, {
        duration: duration,
        easing: EASING,
      }),
      withRepeat(
        withTiming(-offset, {
          duration,
          easing: EASING,
        }),
        2,
        true,
      ),
      withTiming(0, { duration: duration * 3, easing: EASING }),
    );
    Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);
  };

  const handleUnlockVaultPress = async () => {
    if (formPassword) {
      try {
        await unlockVault(formPassword);
      } catch (err) {
        if (err instanceof InvalidKeyError) {
          shakeUnlockVaultButton();
          ToastAndroid.show(
            lang.unlockVaultScreen.incorrectPasswordError,
            ToastAndroid.SHORT,
          );
          return;
        }

        ToastAndroid.show(
          lang.errors.createUnexpectedErrorText(err),
          ToastAndroid.SHORT,
        );
        throw err;
      }

      // Navigate to the unlocked vault
      navigation.reset({
        index: 0,
        routes: [{ name: "MyPasswords" }],
      });
    } else {
      shakeUnlockVaultButton();
      ToastAndroid.show(
        lang.unlockVaultScreen.passwordEmptyError,
        ToastAndroid.SHORT,
      );
    }
  };

  const onDeleteVault = () => {
    navigation.reset({
      index: 0,
      routes: [{ name: "Welcome" }],
    });
  };

  return (
    <BottomSheetModalProvider>
      <ScreenLayout
        header={{
          separator: false,
          backButton: false,
          rightButtons: (
            <>
              <ScalablePressable onPress={handlePresentDeleteVaultSheetPress}>
                <TrashIcon />
              </ScalablePressable>
              <ScalablePressable onPress={handlePresentPasswordGeneratorPress}>
                <DiceIcon />
              </ScalablePressable>
            </>
          ),
        }}
      >
        <View
          style={{
            flex: 1,
            justifyContent: "center",
            alignItems: "center",
            gap: scale(32),
            width: "100%",
          }}
        >
          <Illustration />
          <View
            style={{
              alignItems: "center",
              gap: scale(22),
              width: "100%",
            }}
          >
            <View
              style={{
                alignItems: "center",
                gap: scale(12),
              }}
            >
              <Text
                style={{
                  fontFamily: "Gilroy-Bold",
                  fontSize: scale(24),
                  color: colors.text,
                }}
              >
                {lang.unlockVaultScreen.title}
              </Text>
              <Text
                style={{
                  fontFamily: "Gilroy-Medium",
                  fontSize: scale(14),
                  textAlign: "center",
                  color: colors.subtext,
                }}
              >
                {lang.unlockVaultScreen.enterPasswordBelow}
              </Text>
            </View>
            <View
              style={{
                flexDirection: "row",
                gap: scale(10),
                width: "100%",
              }}
            >
              <PasswordInput
                value={formPassword}
                onChangeText={setFormPassword}
                containerStyle={{
                  flex: 1,
                }}
              />
              <ScalablePressable
                style={[
                  {
                    borderRadius: scale(16),
                    padding: scale(13.9),
                    backgroundColor: colors.text,
                  },
                  unlockVaultButtonTranslateXAnimatedStyle,
                ]}
                onPress={handleUnlockVaultPress}
              >
                <RightArrowIcon color={colors.primary} size="md" />
              </ScalablePressable>
            </View>
          </View>
        </View>
      </ScreenLayout>
      <PasswordGeneratorCopySheet sheetRef={passwordGeneratorSheetRef} />
      <DeleteVaultSheet
        sheetRef={deleteVaultSheetRef}
        onDelete={onDeleteVault}
      />
    </BottomSheetModalProvider>
  );
}

function Illustration(props: SvgProps) {
  return (
    <Svg width={281} height={121} fill="none" {...props}>
      <G clipPath="url(#a)">
        <Path
          fill="#F0F0F0"
          d="M55.605 113.822c-6.228-4.059-10.756-11.354-9.83-18.73A34.253 34.253 0 0 0 66.913 105.4c3.102.31 6.585.333 8.788 2.539 1.37 1.372 1.953 3.379 1.983 5.318.03 1.94-.436 3.849-.9 5.733l.115.471c-7.43-.275-15.064-1.58-21.292-5.639Z"
        />
        <Path
          fill="#fff"
          d="M45.932 95.09a29.273 29.273 0 0 0 11.617 13.765 12.594 12.594 0 0 0 3.61 1.602 7.232 7.232 0 0 0 3.804-.146c1.155-.338 2.298-.818 3.516-.869a4.42 4.42 0 0 1 3.344 1.39c1.095 1.104 1.728 2.536 2.3 3.958.633 1.579 1.266 3.228 2.557 4.398.156.141-.073.376-.229.234-2.245-2.034-2.493-5.298-4.258-7.658-.823-1.101-1.984-1.961-3.403-1.997-1.24-.032-2.42.462-3.587.814a7.719 7.719 0 0 1-3.713.282 11.682 11.682 0 0 1-3.659-1.457 28.426 28.426 0 0 1-6.848-5.649 29.798 29.798 0 0 1-5.367-8.579c-.08-.195.237-.28.316-.087Z"
        />
        <Path
          fill="#fff"
          d="M55.806 107.906a4.394 4.394 0 0 1-5.601.988c-.182-.107-.024-.394.158-.287a4.068 4.068 0 0 0 5.208-.93c.134-.163.368.067.235.229ZM64.4 110.559a8.463 8.463 0 0 0-2.725-5.535c-.156-.142.073-.377.228-.235a8.806 8.806 0 0 1 2.824 5.766c.017.21-.31.213-.328.004ZM49.13 101.087a2.486 2.486 0 0 0 .926-2.17c-.02-.21.308-.213.327-.004a2.786 2.786 0 0 1-1.018 2.403.166.166 0 0 1-.116.047.167.167 0 0 1-.116-.044.166.166 0 0 1-.003-.232Z"
        />
        <Path
          fill="#F0F0F0"
          d="M67.02 81.595c.016.13.032.261.05.394a32.744 32.744 0 0 0 1.103 5.195c.037.132.077.266.117.396a34.52 34.52 0 0 0 5.937 11.237 33.573 33.573 0 0 0 3.465 3.733c1.723 1.594 3.719 3.186 4.784 5.198.113.208.213.424.3.645l-5.313 10.893c-.025.019-.047.039-.072.057l-.192.445c-.068-.055-.138-.114-.207-.169-.04-.031-.078-.066-.118-.097l-.078-.063-.023-.02c-.025-.019-.046-.038-.069-.055-.391-.327-.781-.656-1.17-.989l-.003-.005c-2.953-2.545-5.718-5.358-7.969-8.502-.068-.095-.138-.191-.203-.29a32.043 32.043 0 0 1-2.657-4.493c-.415-.86-.785-1.74-1.11-2.637a23.517 23.517 0 0 1-1.383-7.221c-.157-4.913 1.26-9.822 4.556-13.383.085-.09.168-.18.255-.27Z"
        />
        <Path
          fill="#fff"
          d="M67.146 81.687a29.276 29.276 0 0 0 .989 17.984 12.608 12.608 0 0 0 1.919 3.453 7.23 7.23 0 0 0 3.124 2.173c1.126.426 2.328.731 3.33 1.424a4.427 4.427 0 0 1 1.833 3.122c.21 1.541-.146 3.066-.546 4.545-.445 1.642-.933 3.34-.606 5.051.04.207-.284.257-.324.05-.568-2.977 1.2-5.731 1.211-8.678.006-1.375-.403-2.761-1.514-3.644-.972-.772-2.21-1.088-3.355-1.509a7.723 7.723 0 0 1-3.134-2.011 11.653 11.653 0 0 1-2.044-3.366 28.409 28.409 0 0 1-2.067-8.633 29.794 29.794 0 0 1 .88-10.082c.053-.203.358-.081.304.12Z"
        />
        <Path
          fill="#fff"
          d="M67.314 97.864a4.392 4.392 0 0 1-5.066-2.583c-.081-.195.218-.33.299-.134a4.067 4.067 0 0 0 4.718 2.393c.205-.05.253.275.05.324ZM72.578 105.157a8.467 8.467 0 0 0 1.157-6.06c-.039-.208.285-.257.324-.05a8.805 8.805 0 0 1-1.217 6.303c-.113.179-.376-.016-.264-.193ZM66.09 88.4a2.487 2.487 0 0 0 2.046-1.175c.11-.18.374.015.264.194a2.786 2.786 0 0 1-2.26 1.305.17.17 0 0 1-.187-.137.165.165 0 0 1 .138-.187Z"
        />
        <Path
          fill="#F0F0F0"
          d="M245.672 113.822c6.228-4.059 10.757-11.354 9.83-18.73a34.254 34.254 0 0 1-21.136 10.308c-3.102.31-6.585.333-8.788 2.539-1.371 1.372-1.953 3.379-1.983 5.318-.03 1.94.436 3.849.899 5.733l-.114.471c7.429-.275 15.064-1.58 21.292-5.639Z"
        />
        <Path
          fill="#fff"
          d="M255.346 95.09a29.274 29.274 0 0 1-11.618 13.765 12.586 12.586 0 0 1-3.611 1.602 7.229 7.229 0 0 1-3.802-.146c-1.156-.338-2.299-.818-3.517-.869a4.418 4.418 0 0 0-3.343 1.39c-1.096 1.104-1.729 2.536-2.3 3.958-.634 1.579-1.267 3.228-2.558 4.398-.156.141.073.376.229.234 2.246-2.034 2.493-5.298 4.258-7.658.824-1.101 1.984-1.961 3.403-1.997 1.24-.032 2.42.462 3.587.814a7.72 7.72 0 0 0 3.713.282 11.685 11.685 0 0 0 3.659-1.457 28.445 28.445 0 0 0 6.848-5.649 29.805 29.805 0 0 0 5.367-8.579c.08-.195-.236-.28-.315-.087Z"
        />
        <Path
          fill="#fff"
          d="M245.472 107.906a4.391 4.391 0 0 0 5.601.988c.181-.107.023-.394-.158-.287a4.07 4.07 0 0 1-5.209-.93c-.133-.163-.367.067-.234.229ZM236.878 110.559a8.467 8.467 0 0 1 2.725-5.535c.156-.142-.073-.377-.229-.235a8.811 8.811 0 0 0-2.824 5.766c-.017.21.311.213.328.004ZM252.147 101.087a2.49 2.49 0 0 1-.926-2.17c.02-.21-.308-.213-.327-.004a2.784 2.784 0 0 0 1.018 2.403c.031.03.072.047.115.047a.169.169 0 0 0 .117-.044.168.168 0 0 0 .049-.116.162.162 0 0 0-.046-.116Z"
        />
        <Path
          fill="#F0F0F0"
          d="M234.257 81.595c-.016.13-.032.261-.051.394a32.677 32.677 0 0 1-1.102 5.195c-.037.132-.077.266-.117.396a34.535 34.535 0 0 1-5.937 11.237 33.509 33.509 0 0 1-3.465 3.733c-1.723 1.594-3.719 3.186-4.783 5.198a5.641 5.641 0 0 0-.301.645l5.314 10.893c.024.019.046.039.071.057l.192.445c.069-.055.138-.114.207-.169.04-.031.078-.066.118-.097l.078-.063.023-.02c.025-.019.046-.038.069-.055.391-.327.781-.656 1.17-.989l.003-.005c2.953-2.545 5.718-5.358 7.969-8.502.068-.095.138-.191.203-.29a31.916 31.916 0 0 0 2.657-4.493c.415-.86.786-1.74 1.111-2.637a23.524 23.524 0 0 0 1.382-7.221c.157-4.913-1.259-9.822-4.556-13.383-.085-.09-.168-.18-.255-.27Z"
        />
        <Path
          fill="#fff"
          d="M234.131 81.687a29.283 29.283 0 0 1-.989 17.984 12.604 12.604 0 0 1-1.919 3.453 7.224 7.224 0 0 1-3.124 2.173c-1.126.426-2.328.731-3.331 1.424a4.433 4.433 0 0 0-1.832 3.122c-.21 1.541.146 3.066.546 4.545.445 1.642.932 3.34.606 5.051-.04.207.284.257.324.05.568-2.977-1.2-5.731-1.211-8.678-.006-1.375.403-2.761 1.514-3.644.972-.772 2.211-1.088 3.355-1.509a7.726 7.726 0 0 0 3.134-2.011 11.672 11.672 0 0 0 2.044-3.366 28.406 28.406 0 0 0 2.067-8.633 29.79 29.79 0 0 0-.88-10.082c-.053-.203-.358-.081-.304.12Z"
        />
        <Path
          fill="#fff"
          d="M233.963 97.864a4.391 4.391 0 0 0 5.067-2.583c.08-.195-.219-.33-.299-.134a4.07 4.07 0 0 1-4.718 2.393c-.205-.05-.254.275-.05.324ZM228.699 105.156a8.467 8.467 0 0 1-1.157-6.06c.039-.207-.285-.257-.324-.05a8.803 8.803 0 0 0 1.217 6.304c.113.178.376-.016.264-.194ZM235.187 88.4a2.485 2.485 0 0 1-2.046-1.175c-.11-.18-.374.015-.264.194a2.791 2.791 0 0 0 2.26 1.305.17.17 0 0 0 .121-.032.173.173 0 0 0 .066-.105.165.165 0 0 0-.137-.187Z"
        />
        <Path
          fill="#FFB6B6"
          d="M67.873 78.03a1.88 1.88 0 0 1-.447-2.85l-3.313-5.807 3.467.224 2.615 5.48a1.891 1.891 0 0 1-2.322 2.953ZM42.369 117.615h2.294l1.09-8.847H42.37v8.847Z"
        />
        <Path
          fill="#2F2E41"
          d="M41.784 116.866H46.3a2.882 2.882 0 0 1 2.878 2.879v.093l-7.395.001v-2.973Z"
        />
        <Path
          fill="#FFB6B6"
          d="M58.084 117.615h2.293l1.091-8.847h-3.385v8.847Z"
        />
        <Path
          fill="#2F2E41"
          d="M57.498 116.866h4.517a2.883 2.883 0 0 1 2.88 2.879v.093l-7.396.001v-2.973ZM63.981 69.623s.631 8.984-.611 13.508c-1.243 4.525-1.465 31.887-1.465 31.887h-4.164l-3.61-37.245-8.322 37.376-3.967-.273 2.176-44.043 19.963-1.21Z"
        />
        <Path
          fill="#3F3D56"
          d="m45.739 39.339 3.184-2.324 5.335 1.162 1.444 3.431 2.488 1.234a5.641 5.641 0 0 1 3.077 4.245l3.555 24.55-20.804-.804-2.519-28.912a2.266 2.266 0 0 1 2.127-2.46l2.113-.122Z"
        />
        <Path
          fill="#3F3D56"
          d="m59.507 44.76 1.921 2.59 8.37 25.526-3.923 1.57-6.282-11.894-.086-17.792Z"
        />
        <Path
          fill="#FFB9B9"
          d="M52.542 35.802a4.647 4.647 0 1 0 0-9.293 4.647 4.647 0 0 0 0 9.293Z"
        />
        <Path
          fill="#000"
          d="m42.412 50.273 7.583 10.546 8.476 5.528-16.059-16.074Z"
          opacity={0.1}
        />
        <Path
          fill="#2F2E41"
          d="M50.08 34.515c-.324-.645-.657-1.348-.533-2.059.124-.71.94-1.33 1.57-.978.26-.944 1.417-1.358 2.391-1.248.974.108 1.87.578 2.83.78.958.201 2.123.041 2.64-.79l-1.24-.021L59.03 28.7l-1.497-.112c.519-.56.381-1.51-.12-2.085-.503-.574-1.264-.846-2.008-1.018a11.178 11.178 0 0 0-4.519-.104 5.873 5.873 0 0 0-2.007.7 3.994 3.994 0 0 0-1.404 1.455 4.806 4.806 0 0 0-.57 2.19 6.124 6.124 0 0 0 2.698 5.208"
        />
        <Path
          fill="#E4E4E4"
          d="M223.09 119.957H78.887a5.605 5.605 0 0 1-5.601-5.601V6.101A5.608 5.608 0 0 1 78.887.5H223.09a5.608 5.608 0 0 1 5.601 5.601v108.255a5.61 5.61 0 0 1-5.601 5.601Z"
        />
        <Path
          fill="#fff"
          d="M186.797 50.205h-22.261a4.144 4.144 0 0 1-4.147-4.148 4.147 4.147 0 0 1 4.147-4.148h22.261a4.148 4.148 0 0 1 0 8.296ZM167.302 61.542h-5.254a1.522 1.522 0 0 1-1.076-2.596 1.522 1.522 0 0 1 1.076-.445h5.254a1.52 1.52 0 0 1 0 3.041ZM189.147 61.542h-5.254a1.52 1.52 0 0 1 0-3.041h5.254a1.52 1.52 0 0 1 0 3.041ZM178.086 61.542h-5.254a1.52 1.52 0 0 1 0-3.041h5.254a1.522 1.522 0 0 1 1.076 2.596 1.522 1.522 0 0 1-1.076.445ZM167.302 67.349h-5.254a1.52 1.52 0 0 1 0-3.042h5.254a1.524 1.524 0 0 1 1.521 1.521 1.521 1.521 0 0 1-1.521 1.52ZM189.147 67.349h-5.254a1.52 1.52 0 0 1 0-3.042h5.254a1.52 1.52 0 0 1 0 3.042ZM178.086 67.349h-5.254a1.52 1.52 0 0 1 0-3.042h5.254a1.523 1.523 0 0 1 1.076 2.596 1.523 1.523 0 0 1-1.076.446ZM167.302 73.156h-5.254a1.522 1.522 0 0 1-1.076-2.596 1.522 1.522 0 0 1 1.076-.446h5.254a1.52 1.52 0 0 1 0 3.042ZM189.147 73.156h-5.254a1.52 1.52 0 0 1 0-3.042h5.254a1.52 1.52 0 0 1 0 3.042ZM178.086 73.156h-5.254a1.52 1.52 0 0 1 0-3.042h5.254a1.522 1.522 0 0 1 1.076 2.596 1.522 1.522 0 0 1-1.076.446ZM167.302 78.963h-5.254a1.522 1.522 0 0 1-1.076-2.596 1.522 1.522 0 0 1 1.076-.446h5.254a1.52 1.52 0 0 1 0 3.042ZM189.147 78.963h-5.254a1.52 1.52 0 0 1 0-3.042h5.254a1.52 1.52 0 0 1 0 3.042ZM178.086 78.963h-5.254a1.52 1.52 0 0 1 0-3.042h5.254a1.522 1.522 0 0 1 1.076 2.597 1.522 1.522 0 0 1-1.076.445Z"
        />
        <Path
          fill="#CACACA"
          d="M131.769 72.88c7.788 0 14.102-6.314 14.102-14.103s-6.314-14.103-14.102-14.103c-7.789 0-14.103 6.314-14.103 14.103s6.314 14.102 14.103 14.102Z"
        />
        <Path
          fill="#fff"
          d="M131.768 76.06a4.151 4.151 0 0 1-4.147-4.148v-26.27a4.141 4.141 0 0 1 2.559-3.835 4.149 4.149 0 0 1 5.736 3.835v26.27a4.15 4.15 0 0 1-4.148 4.147Z"
        />
        <Path
          fill="#E4E4E4"
          d="M168.612 48.423h-3.871a.555.555 0 0 1-.553-.553.555.555 0 0 1 .553-.553h3.871a.552.552 0 1 1 0 1.106ZM174.695 48.562h-3.871a.555.555 0 0 1-.553-.553.555.555 0 0 1 .553-.553h3.871a.553.553 0 1 1 0 1.106ZM180.778 48.7h-3.871a.552.552 0 1 1 0-1.106h3.871a.551.551 0 0 1 .553.553.552.552 0 0 1-.553.553ZM186.862 48.839h-3.871a.555.555 0 0 1-.553-.553.555.555 0 0 1 .553-.554h3.871a.553.553 0 0 1 0 1.107Z"
        />
        <Path
          fill="#CACACA"
          d="M91.673 102.882a5.171 5.171 0 0 0 1.537 3.681h-2.284a5.13 5.13 0 0 1-5.132-5.132v-83.2a5.132 5.132 0 0 1 5.132-5.133h3.324a5.183 5.183 0 0 0-2.577 4.48v85.304ZM260.229 120.5H.771a.33.33 0 0 1-.329-.329.327.327 0 0 1 .329-.329h259.458a.33.33 0 0 1 .233.562.326.326 0 0 1-.233.096Z"
        />
        <Path
          fill="#fff"
          d="M91.12 37.41c-1.748-.49-3.502-.943-5.262-1.36a150.316 150.316 0 0 0-18.276-3.186 4.089 4.089 0 0 0-4.985 2.878L59.525 47.08a4.086 4.086 0 0 0 2.873 5.008l.041.008a146.558 146.558 0 0 1 13.342 2.146c1.308.27 2.612.56 3.913.868.57.133 1.136.271 1.706.412a155.333 155.333 0 0 1 9.72 2.76c.185.055.37.113.553.174V37.567a18.035 18.035 0 0 0-.553-.157Z"
        />
        <Path
          fill="#111"
          d="M91.12 37.41c-1.748-.49-3.502-.943-5.262-1.36a150.316 150.316 0 0 0-18.276-3.186 4.089 4.089 0 0 0-4.985 2.878L59.525 47.08a4.086 4.086 0 0 0 2.873 5.008l.041.008a146.558 146.558 0 0 1 13.342 2.146c1.308.27 2.612.56 3.913.868.57.133 1.136.271 1.706.412a155.333 155.333 0 0 1 9.72 2.76c.185.055.37.113.553.174v-.584l-.553-.174a145.1 145.1 0 0 0-4.707-1.413 103.88 103.88 0 0 0-1.758-.49 162.587 162.587 0 0 0-4.834-1.224c-.041-.011-.086-.02-.127-.03-.949-.225-1.899-.438-2.851-.642a146.887 146.887 0 0 0-14.321-2.35 3.533 3.533 0 0 1-2.464-4.323l3.072-11.34a3.53 3.53 0 0 1 4.328-2.48l.041.005a149.83 149.83 0 0 1 18.229 3.175 146.496 146.496 0 0 1 5.945 1.557v-.576a18.035 18.035 0 0 0-.553-.157Z"
        />
        <Path
          fill="#111"
          d="M91.673 37.855v20.308a143.095 143.095 0 0 0-5.472-1.654 148.03 148.03 0 0 0-6.443-1.67c-.022-.1-.044-.199-.064-.298a16.83 16.83 0 0 1-.243-1.441 12.45 12.45 0 0 1-.067-.559 19.1 19.1 0 0 1 6.161-16c.08-.077.163-.151.247-.223 1.786.426 3.562.887 5.328 1.383.185.047.37.099.553.154ZM73.31 46.17l-7.691-.907a2.076 2.076 0 0 0-1.257 3.87c.238.134.5.219.77.25l7.69.907a2.075 2.075 0 0 0 .487-4.12Zm1.266 2.24a1.522 1.522 0 0 1-1.69 1.33l-7.69-.907a1.52 1.52 0 0 1 .356-3.02l7.69.908a1.527 1.527 0 0 1 1.334 1.69Z"
        />
        <Path
          fill="#fff"
          d="M91.673 42.611v9.631c-.178.107-.362.201-.553.282a5.577 5.577 0 0 1-6.484-1.435 5.581 5.581 0 0 1 7.037-8.478Z"
        />
        <Path
          fill="#fff"
          d="M91.12 49.583a145.136 145.136 0 0 0-11.735 2.958 147.427 147.427 0 0 0-4.696 1.477 153.438 153.438 0 0 0-9.996 3.725 4.089 4.089 0 0 0-2.983 4.925l2.773 11.414a4.087 4.087 0 0 0 4.93 3.004l.04-.014a147.633 147.633 0 0 1 16.571-5.675 152.85 152.85 0 0 1 5.096-1.321c.186-.045.368-.089.553-.13V49.469c-.185.033-.367.072-.553.114Z"
        />
        <Path
          fill="#111"
          d="M91.12 49.583a145.136 145.136 0 0 0-11.735 2.958 147.427 147.427 0 0 0-4.696 1.477 153.438 153.438 0 0 0-9.996 3.725 4.089 4.089 0 0 0-2.983 4.925l2.773 11.414a4.087 4.087 0 0 0 4.93 3.004l.04-.014a147.633 147.633 0 0 1 16.571-5.675 152.85 152.85 0 0 1 5.096-1.321c.186-.045.368-.089.553-.13v-.57l-.553.133-.417.1c-1.626.395-3.234.813-4.826 1.255-.041.01-.085.025-.127.036a147.51 147.51 0 0 0-16.489 5.654 3.536 3.536 0 0 1-4.242-2.602l-2.77-11.414a3.532 3.532 0 0 1 2.593-4.261l.042-.014a149.328 149.328 0 0 1 10.898-4.021c.354-.116.708-.23 1.062-.343.868-.274 1.737-.54 2.607-.799.918-.274 1.835-.537 2.752-.79.06-.018.121-.034.182-.05a148.757 148.757 0 0 1 8.735-2.116c.183-.039.368-.078.553-.113v-.562c-.185.033-.367.072-.553.114Z"
        />
        <Path
          fill="#111"
          d="M91.673 49.748V69.66c-.182.042-.367.083-.553.128-1.73.42-3.454.868-5.17 1.344a19.114 19.114 0 0 1-4.455-16.154c.17-.906.407-1.798.707-2.67.036-.104.072-.21.111-.315.843-.232 1.69-.455 2.538-.669a136.926 136.926 0 0 1 6.27-1.463c.182-.041.367-.077.552-.113ZM78.823 67.786a2.077 2.077 0 0 0-2.702-1.142l-7.175 2.91a2.074 2.074 0 0 0 1.56 3.843l7.175-2.91a2.08 2.08 0 0 0 1.142-2.7Zm-1.35 2.187-7.175 2.912a1.522 1.522 0 0 1-1.145-2.82l7.176-2.91a1.52 1.52 0 0 1 1.145 2.818Z"
        />
        <Path
          fill="#fff"
          d="M91.673 54.833v10.843a5.393 5.393 0 0 1-.553.11 5.587 5.587 0 0 1-4.706-9.5 5.584 5.584 0 0 1 5.26-1.453Z"
        />
        <Path
          fill="#2F2E41"
          d="M91.12 35.97v27.6c.185-.062.37-.12.553-.175V36.22a47.517 47.517 0 0 0-.553-.252Zm0 0v27.6c.185-.062.37-.12.553-.175V36.22a47.517 47.517 0 0 0-.553-.252Zm0 0v27.6c.185-.062.37-.12.553-.175V36.22a47.517 47.517 0 0 0-.553-.252Zm0 2.015v31.803c.185-.044.37-.086.553-.127V38.143c-.185-.055-.37-.108-.553-.158Zm0 0v31.803c.185-.044.37-.086.553-.127V38.143c-.185-.055-.37-.108-.553-.158Zm0 0v31.803c.185-.044.37-.086.553-.127V38.143c-.185-.055-.37-.108-.553-.158Zm0 0v31.803c.185-.044.37-.086.553-.127V38.143c-.185-.055-.37-.108-.553-.158Zm0 0v32.09c.185-.044.368-.088.553-.13V38.144c-.185-.055-.37-.108-.553-.158Zm120.633-26.148H96.861a5.75 5.75 0 0 0-5.74 5.741v85.304a5.749 5.749 0 0 0 5.74 5.738h114.892a5.745 5.745 0 0 0 5.738-5.738V17.578a5.747 5.747 0 0 0-5.738-5.74Zm5.185 91.045a5.194 5.194 0 0 1-5.185 5.185H96.861a5.191 5.191 0 0 1-5.188-5.185V17.578a5.195 5.195 0 0 1 5.188-5.188h114.892a5.19 5.19 0 0 1 5.185 5.188v85.304ZM91.12 37.985V69.51l.553-.133V38.143c-.185-.055-.37-.108-.553-.158Zm0 0v31.803c.185-.044.37-.086.553-.127V38.143c-.185-.055-.37-.108-.553-.158Zm0 0v31.803c.185-.044.37-.086.553-.127V38.143c-.185-.055-.37-.108-.553-.158Zm0 0v31.803c.185-.044.37-.086.553-.127V38.143c-.185-.055-.37-.108-.553-.158Zm0-2.016v27.6c.185-.06.37-.119.553-.174V36.22a47.517 47.517 0 0 0-.553-.252Zm0 0v27.6c.185-.06.37-.119.553-.174V36.22a47.517 47.517 0 0 0-.553-.252Z"
        />
        <Path
          fill="#FFB6B6"
          d="M66.489 65.17a1.881 1.881 0 0 0-2.763-.83l-5.3-4.073-.251 3.465 5.072 3.337a1.891 1.891 0 0 0 3.242-1.898Z"
        />
        <Path
          fill="#3F3D56"
          d="m45.127 40.589-1.744-.824s-2.81.79-1.445 4.506L50.2 59.663l10.088 5.906 3.144-2.787-10.094-7.987-8.21-14.206Z"
        />
      </G>
      <Defs>
        <ClipPath id="a">
          <Path fill="#fff" d="M.441.5h260.117v120H.441z" />
        </ClipPath>
      </Defs>
    </Svg>
  );
}
